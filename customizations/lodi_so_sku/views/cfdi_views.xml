<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <!-- CFDI v4.0-->
    <template id="cfdiv40_inherit_lodi_so_sku" inherit_id="l10n_mx_edi_40.cfdiv40">
        <xpath expr="//*[name()='cfdi:Concepto']" position="attributes">
            <attribute name="t-att-NoIdentificacion">format_string(line.sku or line.product_id.default_code)</attribute>
            <attribute name="t-att-Descripcion">format_string(line.internal_product_name or line.name, 1000)</attribute>
        </xpath>
    </template>

    <template id="cfdiv40_extended_inherit_lodi_so_sku" inherit_id="l10n_mx_edi_extended_40.cfdiv40_extended">
        <xpath expr="//*[name()='cce11:Mercancia']" position="attributes">
            <attribute name="t-att-NoIdentificacion">format_string(product.get_sku_by_partner_id(record.partner_id.id).sku or product.product_tmpl_id.default_code)</attribute>
        </xpath>
    </template>
</odoo>
